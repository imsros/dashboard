<div class="user-add-container">
  <h1>Add User</h1>
  <form [formGroup]="form" (ngSubmit)="submitUser()">
    <div class="avatar-wrapper" (click)="openFile()">
      <img
        class="avatar-img"
        [src]="
          preview ||
          'https://i.pinimg.com/736x/37/f0/a4/37f0a457e30955ee67bd690451e3b03a.jpg'
        "
        alt="avatar"
      />
      <div class="overlay">
        <mat-icon>cloud_upload</mat-icon>
        <span>Upload</span>
      </div>
      <input
        id="fileInput"
        type="file"
        hidden
        accept="image/*"
        (change)="onImageChange($event)"
      />
    </div>

    <mat-form-field>
      <mat-label>Username</mat-label>
      <input matInput formControlName="username" />
      <mat-error *ngIf="form.get('username')?.hasError('required')">
        Username is required
      </mat-error>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Enter your email</mat-label>
      <input matInput formControlName="email" />
      <mat-error *ngIf="form.get('email')?.hasError('required')"
        >Email is required</mat-error
      >
      <mat-error *ngIf="form.get('email')?.hasError('email')"
        >Incorrect email format.</mat-error
      >
    </mat-form-field>
    <mat-form-field>
      <mat-label>Address</mat-label>
      <input matInput formControlName="address" />
      <mat-error *ngIf="form.get('address')?.hasError('required')"
        >Address is required.</mat-error
      >
    </mat-form-field>
    <mat-form-field>
      <mat-label>Phone</mat-label>
      <input matInput formControlName="phone" />
      <mat-error *ngIf="form.get('phone')?.hasError('required')"
        >Phone is required</mat-error
      >
      <mat-error *ngIf="form.get('phone')?.hasError('pattern')"
        >Should be 9-10 digits.</mat-error
      >
    </mat-form-field>
    <mat-form-field>
      <mat-label>Type</mat-label>
      <mat-select formControlName="type">
        <mat-option value="admin">Admin</mat-option>
        <mat-option value="user">User</mat-option>
      </mat-select>
      <mat-error *ngIf="form.get('type')?.hasError('required')"
        >Please select the type.</mat-error
      >
    </mat-form-field>

    <div class="btn">
      <button mat-stroked-button color="primary" routerLink="/user">
        Cancel
      </button>
      <button mat-raised-button color="primary">Save</button>
    </div>
  </form>
</div>
